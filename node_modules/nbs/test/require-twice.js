/*eslint-env mocha*/
/*eslint-disable strict, no-console*/

var assert = require('assert');
var sandbox = require('sandboxed-module');

describe('require twice', function(){
  
  it('shoud not bind domain method twice', function(){
    var nbs2 = sandbox.require('../index', {
      singleOnly: true
    });
    var wait2 = require('domain').Domain.wait;

    var nbs = require('../index');
    var wait1 = require('domain').Domain.wait;

    assert.notEqual(nbs2, nbs);
    assert.equal(wait1, wait2);
  });

  
});